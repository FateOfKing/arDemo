<html>
<script src="aframe.min.js"></script>
<!-- we import arjs version without NFT but with marker + location based support -->
<script src="aframe-ar.js"></script>
<script src="aframe-look-at-component.min.js"></script>
<script src="aframe-ar-nft.js"></script>

<script>
  AFRAME.registerComponent('markerhandler', {
    init: function () {
      console.log('markerhandler');
      // this.el.sceneEl.addEventListener('markerFound', () => {
      //   const camera = document.querySelector('[camera]');
      //   const marker = document.querySelector('a-marker');
      //   // redirect to custom URL e.g. google.com
      //   const cameraPosition = camera.object3D.position;
      //   const markerPosition = marker.object3D.position;
      //   distance = cameraPosition.distanceTo(markerPosition)
      //   document.querySelector('a-marker').innerHTML =
      //     `<a-box position='${markerPosition.x} ${markerPosition.y+0.5} ${markerPosition.z}' material='color: red;opacity: 0.5'></a-box>\n\n<a-box position='${markerPosition.x+1} ${markerPosition.y+0.5} ${markerPosition.z}' material='color: red;opacity: 0.5'></a-box>\n\n<a-box position='${markerPosition.x+2} ${markerPosition.y+0.5} ${markerPosition.z}' material='color: red;opacity: 0.5'></a-box>`;
      //   // do what you want with the distance:
      //   alert(`${markerPosition.x},${markerPosition.y},${markerPosition.z}`)
      // })

    }
  });
 
</script>

<body style="margin : 0px; overflow: hidden;">
  <a-scene vr-mode-ui="enabled: false"
  embedded
  arjs="sourceType: webcam; debugUIEnabled: false;">
    <a-marker markerhandler preset="hiro">
      <a-box position='0 0.5 0' material='color: red;opacity: 0.5'></a-box>
    </a-marker>
    <a-text
        value="11111"
        look-at="[gps-camera]"
        scale="120 120 120"
        position="0 0 0"
        gps-entity-place="latitude: 31.57888888888889; longitude: 120.36444444444444;"
      ></a-text>
      <a-text
        value="22222"
        look-at="[gps-camera]"
        scale="120 120 120"
        position="1 1 1"
        gps-entity-place="latitude: 31.57888888888889; longitude: 120.36444444444444;"
      ></a-text>
      <a-entity camera></a-entity>

    <a-camera gps-camera rotation-reader> </a-camera>
  </a-scene>
</body>

</html>